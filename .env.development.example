# ===================================================
# DEVELOPMENT ENVIRONMENT CONFIGURATION
# ===================================================
# Copy this file to .env for local development

# ===================================================
# DEPLOYMENT MODE
# ===================================================
# For development, use stateless (no database needed)
DEPLOYMENT_MODE=stateless

# ===================================================
# SERVER CONFIGURATION
# ===================================================
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO    # Use INFO or DEBUG for development
DEBUG=true        # Enable debug mode for development

# ===================================================
# n8n INTEGRATION
# ===================================================
# Replace with your n8n webhook URL
N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook/your-webhook-id/chat

# Optional: If your n8n webhook requires authentication
# N8N_API_KEY=test-api-key

# ===================================================
# SECURITY CONFIGURATION
# ===================================================
# For development, these can be simple (but still change them!)
JWT_SECRET_KEY=dev-jwt-secret-change-this
SESSION_SECRET_KEY=dev-session-secret-change-this

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ===================================================
# CORS CONFIGURATION
# ===================================================
# Include all local development URLs
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173,http://localhost:8000,http://localhost:8001,http://localhost:8002

# Additional CORS settings
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ===================================================
# RATE LIMITING (Relaxed for development)
# ===================================================
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=5000
RATE_LIMIT_PER_DAY=50000

# ===================================================
# SESSION CONFIGURATION
# ===================================================
SESSION_COOKIE_NAME=chat_session_dev
SESSION_COOKIE_MAX_AGE=86400    # 1 day for development
SESSION_COOKIE_SECURE=false     # false for local development
SESSION_COOKIE_SAMESITE=lax
SESSION_COOKIE_HTTPONLY=true

# ===================================================
# OPTIONAL: DATABASE CONFIGURATION
# ===================================================
# Uncomment if you want to test with PostgreSQL
# DEPLOYMENT_MODE=postgresql
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/chat_proxy_dev
# REDIS_URL=redis://localhost:6379/0

# Uncomment if you want to test with SQLite
# DEPLOYMENT_MODE=sqlite
# SQLITE_DB_PATH=./chat_sessions_dev.db
# SQLITE_CLEANUP_INTERVAL_HOURS=1
# SQLITE_SESSION_RETENTION_DAYS=7

# ===================================================
# DEVELOPMENT FEATURES
# ===================================================
# Auto-reload on code changes (only for development!)
RELOAD=true

# Number of workers (1 for development with reload)
WORKERS=1

# ===================================================
# MONITORING & HEALTH
# ===================================================
ENABLE_METRICS=true
METRICS_PATH=/metrics
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INCLUDE_DETAILS=true  # Show details in development

# ===================================================
# STATIC FILE SERVING
# ===================================================
SERVE_WIDGET_FILES=true
WIDGET_FILES_PATH=../chat-widget/dist

# ===================================================
# DEVELOPMENT TOOLS
# ===================================================
# Enable SQL query logging (PostgreSQL mode)
# SQLALCHEMY_ECHO=true

# Enable request/response logging
# LOG_REQUESTS=true
# LOG_RESPONSES=true