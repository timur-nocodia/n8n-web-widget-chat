# üìã **–ü–õ–ê–ù –†–ê–ó–†–ê–ë–û–¢–ö–ò SECURE CHAT PROXY** - –û–ë–ù–û–í–õ–ï–ù–û ‚úÖ

> **–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω:** 22 –∞–≤–≥—É—Å—Ç–∞ 2025  
> **–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** v1.0 - MVP –≥–æ—Ç–æ–≤ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç  
> **GitHub:** https://github.com/timur-nocodia/n8n-web-widget-chat.git

## üéØ **–û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê**

### **–ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º:**
–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –∏ –≤–∏–¥–∂–µ—Ç —á–∞—Ç–∞ –¥–ª—è e-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å AI-–∞–≥–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ n8n, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

### **–ó–∞—á–µ–º –º—ã —ç—Ç–æ –¥–µ–ª–∞–µ–º:**
1. **–°–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - –∑–∞—â–∏—Ç–∞ n8n webhook URL –∏ credentials –æ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∞–π—Ç–æ–≤ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å
5. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     E-COMMERCE WEBSITES                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Site A    ‚îÇ    Site B    ‚îÇ    Site C    ‚îÇ    Site N...    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ HTTPS/WSS
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CHAT WIDGET (React)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ Embedded iframe                                            ‚îÇ
‚îÇ ‚Ä¢ Session management via cookies                             ‚îÇ
‚îÇ ‚Ä¢ SSE connection for streaming                               ‚îÇ
‚îÇ ‚Ä¢ Auto-reconnect logic                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ API Calls
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 PROXY SERVER (FastAPI)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ Session Management      ‚îÇ ‚Ä¢ Rate Limiting                 ‚îÇ
‚îÇ ‚Ä¢ JWT Generation          ‚îÇ ‚Ä¢ Request Validation            ‚îÇ
‚îÇ ‚Ä¢ SSE Streaming           ‚îÇ ‚Ä¢ Analytics Collection          ‚îÇ
‚îÇ ‚Ä¢ Site Origin Validation  ‚îÇ ‚Ä¢ Error Handling               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ Internal API
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     n8n WORKFLOW                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ Chat Trigger (SSE enabled)                                ‚îÇ
‚îÇ ‚Ä¢ AI Agent Processing                                        ‚îÇ
‚îÇ ‚Ä¢ Tools & Integrations                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DATA LAYER                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ PostgreSQL ‚îÇ Redis Cache ‚îÇ S3/MinIO Storage ‚îÇ Vector DB     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÑ **–ö–ê–ö –í–°–Å –†–ê–ë–û–¢–ê–ï–¢**

### **1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ e-commerce —Å–∞–π—Ç
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è chat widget (React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ iframe)
- Widget –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é —É proxy server
- –°–æ–∑–¥–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π session_id, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ secure cookie
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è fingerprint –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ widget
- Widget –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ proxy —Å session_id
- Proxy –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç origin —Å–∞–π—Ç–∞ –∏ —Å–µ—Å—Å–∏—é
- Proxy –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT —Ç–æ–∫–µ–Ω —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- Proxy –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ n8n —Å JWT –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- n8n –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ AI agent –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç SSE stream
- Proxy –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç SSE stream –æ–±—Ä–∞—Ç–Ω–æ –≤ widget

### **3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:**
- Proxy –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –∏–∑ –ë–î –ø–æ session_id
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–∞–π—Ç–∞ (domain, page_url, user_agent)
- –û–±–æ–≥–∞—â–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–≤—Ä–µ–º—è, –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ IP)
- –ü–µ—Ä–µ–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ n8n –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

### **4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- CORS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- Rate limiting –ø–æ IP –∏ session_id
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ sensitive –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è JWT —Å–µ–∫—Ä–µ—Ç–æ–≤

## üìÅ **–ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê**

```
n8n-embed-chat/                   # ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ proxy-server/             # ‚úÖ FastAPI Backend - –ì–û–¢–û–í
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/                  # ‚úÖ –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –≤ MVP)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/v1/endpoints/ # ‚úÖ chat.py, session.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/             # ‚úÖ config.py, security.py, session.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/         # ‚úÖ n8n_client.py, jwt_service.py, rate_limiter.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/           # ‚úÖ chat.py, session.py  
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # ‚úÖ security.py, rate_limiting.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.py           # ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_simple.py        # üî• –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –†–ê–ë–û–ß–ê–Ø –í–ï–†–°–ò–Ø
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_*.py             # ‚úÖ –§–∞–π–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requirements*.txt     # ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile            # ‚úÖ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .env.example          # ‚úÖ –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ chat-widget/              # ‚úÖ React Frontend - –ì–û–¢–û–í  
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ components/       # ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã:
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatWindow/   # ‚úÖ ChatWindow.tsx, .css
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageList/  # ‚úÖ MessageList.tsx, .css  
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InputArea/    # ‚úÖ InputArea.tsx, .css
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ConnectionStatus/ # ‚úÖ ConnectionStatus.tsx, .css
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ hooks/            # ‚úÖ useSSE.ts, useChat.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ services/         # ‚úÖ api.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ types/            # ‚úÖ index.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx           # ‚úÖ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ main.tsx          # ‚úÖ Entry point
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ embed.ts          # ‚úÖ –°–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ public/embed.js       # ‚úÖ –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Å–∫—Ä–∏–ø—Ç
‚îÇ       ‚îú‚îÄ‚îÄ *.html                # ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile            # ‚úÖ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ package.json          # ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ       ‚îî‚îÄ‚îÄ vite.config.ts        # ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/               # ‚úÖ –ß–ê–°–¢–ò–ß–ù–û
‚îÇ   ‚îî‚îÄ‚îÄ docker/
‚îÇ       ‚îî‚îÄ‚îÄ docker-compose.yml    # ‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # ‚úÖ –ì–û–¢–û–í–û
‚îÇ   ‚îú‚îÄ‚îÄ setup.sh                 # ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ test-security.sh         # ‚úÖ –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ docs/                         # ‚úÖ –ì–û–¢–û–í–û
‚îÇ   ‚îú‚îÄ‚îÄ n8n-integration/         # ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat-workflow.json   # ‚úÖ –ü—Ä–∏–º–µ—Ä workflow
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ setup-guide.md       # ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
‚îÇ   ‚îî‚îÄ‚îÄ security-implementation.md # ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ doc/
‚îÇ   ‚îî‚îÄ‚îÄ init_plan.md             # ‚úÖ –≠—Ç–æ—Ç —Ñ–∞–π–ª - –ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ CLAUDE.md                     # ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ package.json                  # ‚úÖ Root package.json —Å turbo
‚îú‚îÄ‚îÄ pnpm-workspace.yaml          # ‚úÖ PNPM workspace  
‚îú‚îÄ‚îÄ turbo.json                    # ‚úÖ Turborepo –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore                    # ‚úÖ Git ignore rules
‚îî‚îÄ‚îÄ README.md                     # ‚è≥ –í –ü–õ–ê–ù–ê–•
```

### **üèóÔ∏è –û–¢–õ–ò–ß–ò–Ø –û–¢ –ò–ó–ù–ê–ß–ê–õ–¨–ù–û–ì–û –ü–õ–ê–ù–ê:**

#### **‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ —Å–≤–µ—Ä—Ö –ø–ª–∞–Ω–∞:**
- **UTF-8 Fix** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π —Ä–µ—à–µ–Ω–∞
- **Real SSE Streaming** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞
- **main_simple.py** - –†–∞–±–æ—á–∞—è —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **Comprehensive Testing** - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ test_*.py —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

#### **‚è≥ –ß—Ç–æ –æ—Ç–ª–æ–∂–µ–Ω–æ:**
- **packages/** - Shared packages (–ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω—ã)
- **admin-dashboard/** - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (–≤ –ø–ª–∞–Ω–∞—Ö)
- **Kubernetes/Terraform** - IaC –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≤ –ø–ª–∞–Ω–∞—Ö)
- **analytics.py** - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–≤ –ø–ª–∞–Ω–∞—Ö)

#### **üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- **Monolithic vs Microservices** - –í—ã–±—Ä–∞–ª–∏ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –º–æ–Ω–æ–ª–∏—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é `main_simple.py` –¥–ª—è MVP
- **In-memory vs PostgreSQL** - –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º in-memory, PostgreSQL –≤ –ø–ª–∞–Ω–∞—Ö
- **Simple vs Advanced Rate Limiting** - –ë–∞–∑–æ–≤—ã–π rate limiting –±–µ–∑ Redis

## üîß **–ö–õ–Æ–ß–ï–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´**

### **Proxy Server (FastAPI):**
- **Session Manager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Å—Å–∏–π
- **JWT Service** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- **N8N Client** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å n8n —á–µ—Ä–µ–∑ SSE
- **Rate Limiter** - –∑–∞—â–∏—Ç–∞ –æ—Ç spam –∏ DDoS
- **Analytics Collector** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **CORS Handler** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º —Å —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

### **Chat Widget (React):**
- **SSE Connection Manager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ streaming —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
- **Message Queue** - –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–∞—Ö
- **Session Storage** - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **Auto-reconnect** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **Fingerprinting** - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **Responsive UI** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### **Data Layer:**
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Å–µ—Å—Å–∏–∏, –∏—Å—Ç–æ—Ä–∏—è, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
- **Redis** - –∫—ç—à —Å–µ—Å—Å–∏–π –∏ rate limiting
- **S3/MinIO** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –º–µ–¥–∏–∞
- **Vector DB** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è semantic search

## üöÄ **–≠–¢–ê–ü–´ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò** - –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

### **‚úÖ Phase 1: MVP (–ó–ê–í–ï–†–®–ï–ù)** 
- ‚úÖ **–ë–∞–∑–æ–≤—ã–π proxy server —Å JWT** - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `main_simple.py`
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π chat widget** - React TypeScript –≤–∏–¥–∂–µ—Ç –≥–æ—Ç–æ–≤
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n** - SSE —Å—Ç—Ä–∏–º–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **UTF-8 encoding fix** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **Session management** - –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–µ—Å—Å–∏–π —Å cookies
- ‚ö†Ô∏è **PostgreSQL –∏—Å—Ç–æ—Ä–∏—è** - –í –ø–ª–∞–Ω–∞—Ö (–ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è in-memory)

### **‚úÖ Phase 2: Security (–ó–ê–í–ï–†–®–ï–ù)**
- ‚úÖ **Rate limiting** - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞–∑–æ–≤—ã–π rate limiting
- ‚úÖ **CORS policies** - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤  
- ‚úÖ **Session management** - JWT —Ç–æ–∫–µ–Ω—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ **Input validation** - –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### **üîÑ Phase 3: Production Ready (–í –ü–†–û–¶–ï–°–°–ï)**
- ‚úÖ **SSE streaming optimization** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è real-time
- ‚úÖ **Error handling & retry logic** - –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **Docker configs** - Dockerfile –≥–æ—Ç–æ–≤
- ‚è≥ **Monitoring & logging** - –ë–∞–∑–æ–≤—ã–π, —Ç—Ä–µ–±—É–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚è≥ **Kubernetes configs** - –í –ø–ª–∞–Ω–∞—Ö

### **‚è≥ Phase 4: Advanced Features (–í –ü–õ–ê–ù–ê–•)**
- ‚è≥ **Analytics dashboard** - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚è≥ **Multi-site management** - –ß–∞—Å—Ç–∏—á–Ω–æ –≥–æ—Ç–æ–≤–æ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–º–µ–Ω–æ–≤)
- ‚è≥ **A/B testing support** - –í –ø–ª–∞–Ω–∞—Ö
- ‚è≥ **Custom branding options** - –í –ø–ª–∞–Ω–∞—Ö

## üîß **–ß–¢–û –†–ï–ê–õ–¨–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å)**

### **‚úÖ –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

#### **Backend (FastAPI):**
- **main_simple.py** - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è proxy server —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –¢–æ–∫–µ–Ω—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Å–µ—Å—Å–∏–∏ –¥–ª—è n8n
- **SSE —Å—Ç—Ä–∏–º–∏–Ω–≥** - Real-time –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π  
- **n8n –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ü—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å n8n webhook
- **Session management** - In-memory —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ (temporarly)
- **CORS & Security** - –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Rate limiting** - –ü—Ä–æ—Å—Ç–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

#### **Frontend (React TypeScript):**
- **Chat Widget** - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:
  - `ChatWindow.tsx` - –û—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç–∞
  - `MessageList.tsx` - –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π  
  - `InputArea.tsx` - –ü–æ–ª–µ –≤–≤–æ–¥–∞
  - `ConnectionStatus.tsx` - –°—Ç–∞—Ç—É—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **SSE client** - `useSSE.ts` hook –¥–ª—è real-time –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **API integration** - `api.ts` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å backend
- **Embed script** - `embed.ts` –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –Ω–∞ —Å–∞–π—Ç—ã

#### **Infrastructure:**
- **Docker** - –ì–æ—Ç–æ–≤—ã–µ Dockerfile –¥–ª—è –æ–±–µ–∏—Ö —á–∞—Å—Ç–µ–π
- **Monorepo** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å turbo/pnpm
- **Documentation** - CLAUDE.md, setup guides, n8n integration docs

### **üî• –ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø:**

1. **UTF-8 Encoding Fix** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
2. **Real-time Streaming** - –ù–∞—Å—Ç—Ä–æ–µ–Ω SSE —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π 
3. **Security First** - JWT —Ç–æ–∫–µ–Ω—ã, CORS, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
4. **n8n Integration** - –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é streaming –æ—Ç–≤–µ—Ç–æ–≤
5. **Production Ready** - Docker, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## üéØ **–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ó–ê–î–ê–ß–ò (–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏)**

### **üî• –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (–ù–µ–¥–µ–ª—è 1):**
1. **PostgreSQL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ó–∞–º–µ–Ω–∞ in-memory —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –ë–î
2. **Advanced Rate Limiting** - Redis-based –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è  
3. **Monitoring & Logging** - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
4. **Error Handling** - –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
5. **Testing** - Unit –∏ integration —Ç–µ—Å—Ç—ã

### **üìà –í–∞–∂–Ω—ã–µ (–ù–µ–¥–µ–ª—è 2-3):**
1. **Admin Dashboard** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
2. **Multi-site Management** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
3. **Analytics Collection** - –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
4. **Kubernetes configs** - K8s deployment –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
5. **CI/CD Pipeline** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ (–ú–µ—Å—è—Ü 2):**
1. **Custom Branding** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –≤–∏–¥–∂–µ—Ç–∞
2. **A/B Testing** - –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏  
3. **Vector DB** - Semantic search –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
4. **Mobile Optimization** - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
5. **Plugin System** - –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω—ã

## üìã **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –î–û–õ–ì –ò –£–õ–£–ß–®–ï–ù–ò–Ø**

### **‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- In-memory session storage (–Ω—É–∂–Ω–∞ PostgreSQL)
- –ü—Ä–æ—Å—Ç–æ–π rate limiting (–Ω—É–∂–µ–Ω Redis)
- –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ unit —Ç–µ—Å—Ç–æ–≤

### **üîß –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ `main_simple.py` –Ω–∞ –º–æ–¥—É–ª–∏ –∫–∞–∫ –≤ `src/`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ TypeScript —Å—Ç—Ä–æ–≥–∏—Ö —Ç–∏–ø–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SSE performance
- –£–ª—É—á—à–µ–Ω–∏–µ security headers

## üìä **–ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê** 

### **‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ:**
- ‚úÖ **Latency** ~50ms –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞ (SSE)
- ‚úÖ **UTF-8 Support** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **Real-time** - Streaming –±–µ–∑ –∑–∞–º–µ—Ç–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ **Security** - JWT + CORS + Input validation

### **üéØ –¶–µ–ª–µ–≤—ã–µ:**
- **Uptime** > 99.9%
- **Concurrent users** > 10,000  
- **Message throughput** > 1000 msg/sec
- **Zero security breaches**
- **PostgreSQL integration** - –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ